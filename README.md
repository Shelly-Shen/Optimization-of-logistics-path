车辆路径问题的节约算法改进
======================
一、引言      
-------------

车辆路径问题（Vehicle Routing Problem），也称
VRP 问题，是指在各种约束条件下，通过确定配送中心和供应商的路线选择，以使得从配送中心到供应商之间的路径安排达到满足服务效益和经济效益的目的。 VRP 问题可以具体描述为①：已知某一配送中心，并存在一组有确定需求量的客户以及一批有载重限制且数量足够的配送车辆（如车辆载重约束、客户时间窗约束、配送完成返回配送中心约束等）。 在满足约束的情况下按照不同客户的需求合理安排行车路线，从而达到一定的决策目标。  
节约算法作为一种传统的启发式算法，它最早是由 Clarke 和 Wright 于 1964 年提出②。所谓启发式算法，是指通过一定的策略来对处理对象进行优先排序， 通常根据策略选择求得的优化结果为满意解，而非最优解。 节约算法重在解决 VRP 问题中这样的一类问题， 即在非满载的车辆调度问题中，要求路径中的客户需求量不超过配送车辆的载重，在此基础上进行车辆路径的优化选择。
节约算法以其算法简单、 简便易于操作并且能有效平衡问题复杂度和算法复杂度的特点， 一直在实践中受到企业管理者的青睐。 但该算法明显存在的不同的策略选择对应不同的优化效果， 使得算法在策略选择方面还有待改善。基于此，本文通过对节约算法的策略改进， 从而在一定程度上实现了较常规的节约算法基础上的算法改进， 并将其应用到实际案例中，取得了有效的优化结果。    

二、节约算法     
-----------------
#（一）节约算法的基本原理  
假设配送中心为 P0，有 N 个客户分别为 P1、P2…
PN， 配送中心到客户的最短距离用 L1、L2…LN  表示， 车辆的装载量设为 Q。  若存在一配送中心 P0  向客户
Pi、Pj 进行配送过程，分别对 Pi、Pj 进行配送的总距离为 L=2（Li+Lj）；若客户 Pi、Pj 所需的容量小于装载量
Q，则对 Pi、Pj  进行统一配送所花费的距离为 L’= Li+
Lj+Lij，由三角形的性质可知，前者的配送利用率明显低于后者，配送过程中的节约里程为：△L=L-L’=Li+ Lj-Lij，△L≥0③。同理，当供货范围扩充到其他客户诸如 P1、P2…PN 时，在车辆载重量和体积都满足的情况下， 也存在将配送路径进行合并从而达到节约里程的其他配送方案。基于此，节约算法的基本步骤即通过将节约里程按从大到小建立节约里程表， 一步一步进行搜索从而将所有客户纳入配送路径， 并得到最终的配送路径的优化结果。   
#（二）改进的节约算法思路及程序  
节约算法的基本策略，即按节约里程表从大到小的排序进行搜索，一步一步将各客户点纳入到配送路径中， 从而达到最终的节约路径的优化结果。但该策略仅考虑到局部最优，也即最终的优化结果通常满足某条路径可以满足节约路程最多，但对全局来说可能不是较优的结果。 基于此，本文在策略方面提出如下的优化方案。
首先做出节约里程表， 即按节约算法计算出两个客户连接起来的按从大到小顺序的里程节约量；35之后列出所有的客户，即 P1、P2…PN，并与节约里程表进行对比， 假设节约里程表上的路径排序为 i～j，j～k，k～l…，按每个客户点的出现顺序，依此在 P1、P2…PN 中将 Pi、Pj、Pk 删去， 直到搜索出最后出现的客户点，并按该条路径进行优先的策略选择；随后按照节约里程表从大到小进行搜索， 当路径中的客户的需求量之和大于车辆载重量时， 则该路径选择已达到优化标准，并进行下一个路径的选择，直到所有的客户点连接完成为止。 该策略的改进要点在于通过搜索最后出现的客户点， 并将该路径引入最初的策略选择， 从而在某种程度上达成了一种全局性的考虑。 

三、利用改进节约算法的实例分析  
-----------------
设存在一配送中心 P0，以此为出发点向 13 个客户进行配送过程，现已知配送中心与客户间及客户与客户间的最短距离， 以及各个客户所对应的需求量， 并且车辆载重量为 200t，具体数据如下表所示④。
随后，根据以上最短距离表计算出当两两客户合并时的节约里程，并根据节约里程从大到小排序编制出节约里程表，具体数据如表 2 所示。
列出参与配送过程的所有客户，  即 1、2、3…13，将客户与节约里程表中的路径进行对比，搜索得到最后出现的标示为 9 的客户，即在节约里程表中序号为
44 的路径 9~13，将该路径进行优先选择。具体操作步骤如下：首先选择配送路径 9~13，发现其需求量为 95
	
表 1 客户间距离及需求量表

	序号	po	1	2	3	4	5	6	7	8	9	10	11	12	13
	1	12	0												
	2	8	9	0											
	3	17	8	10	0										
	4	15	9	8	4	0									
	5	15	17	9	14	11	0								
	6	20	23	15	20	16	6	0							
	7	17	22	13	20	16	5	4	0						
	8	8	17	9	19	16	11	14	10	0					
	9	6	18	12	22	20	17	20	16	6	0				
	10	16	23	14	22	19	9	8	4	8	14	0			
	11	21	28	18	26	22	11	7	6	13	19	5	0		
	12	11	22	14	24	21	14	16	12	5	7	9	13	0	
	13	15	27	20	30	28	22	23	20	12	9	16	20	8	0
	需求量		48	36	43	92	57	16	56	30	57	47	91	55	38

表 2   节约里程表

	序号	路径	节约里程	序号	路径	节约里程	序号	路径	节约里程

	1	6～11	34	16	1～4	18	31	2～5	14  
	2	6～7	33	17	3～5	18	32	3～7	14   
	3	11～7	32	18	12～13	18	33	4～11	14
	4	10～11	32	19	10～12	18	34	6～8	14
	5	7～10	29	20	3～6	17	35	8～12	14
	6	5～6	29	21	11～13	16	36	2～6	13
	7	3～4	28	22	8～10	16	37	2～7	12
	8	6～11	28	23	7～12	16	8	3～11	12
	9	5～7	27	24	4～7	16	39	4～10	12
	10	5～11	25	25	8～11	16	40	5～8	12
	11	5～10	22	26	2～3	15	41	5～12	12
	12	1～3	21	27	2～4	15	42	6～13	12
	13	11～12	19	28	7～8	15	43	7～13	12
	14	4～5	19	29	6～12	15	44	9～13	12
	15	4～6	19	30	10～13	15	-	-	-

索，得到搜索路径为 P0—9—13—12—P0，此时的客户需求量为 150t，小于车辆载重量 200t，这样就完成了第一条路径的选择，随后按照此方法，得到最终满意的优化路径为：P0—9—13—12—P0， P0—7—6—11— P0， P0—1—3—4P0，P0—2—5—10—8—P0，其中， 每条
路径 P0-P0 构成闭环，数字为具体的单位。
节约算法得到优化路径 P0—7—6—11—8—P0， P0—1—3—4—P0，P0—5—10—12—13—P0，P0—2—
9—P0，仍然构成闭环，但通过不同的单位选择，构成路径的优化。 通过将该改进的节约算法与一般节约小于车辆装载量 200， 再按节约里程表从上往下搜算法的结果进行比较，由于在一定程度上考虑了全局性， 发现改进的算法配送距离缩短了 6km，因而在一定程度上提高了配送过程的经济效益。




